# ЁЯзк Test Suite Documentation

## ЁЯУЛ р╕ар╕▓р╕Юр╕гр╕зр╕б | Overview

р╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╕Щр╕╡р╣Йр╕Ыр╕гр╕░р╕Бр╕нр╕Ър╕Фр╣Йр╕зр╕вр╣Др╕Яр╕ер╣Мр╕Чр╕Фр╕кр╕нр╕Ър╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕░р╕Ър╕Ър╕ер╕Зр╣Ар╕зр╕ер╕▓р╕Чр╕│р╕Зр╕▓р╕Щр╕Чр╕╡р╣Ир╣Гр╕Кр╣Й Bun Test Framework р╣Вр╕Фр╕вр╣Ар╕Щр╣Йр╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ъ timezone р╣Бр╕ер╕░р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Ар╕зр╕ер╕▓р╕Чр╕╡р╣Ир╣Ар╕Бр╣Зр╕Ър╣Ар╕Ыр╣Зр╕Щ UTC р╣Бр╕ер╕░р╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╣Ар╕Ыр╣Зр╕Щр╣Ар╕зр╕ер╕▓р╣Др╕Чр╕в

## ЁЯЧВя╕П р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М | File Structure

```
tests/
тФЬтФАтФА timezone.test.ts              # р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Вр╕нр╕Зр╕гр╕░р╕Ър╕Ъ timezone
тФЬтФАтФА attendance-integration.test.ts  # р╕Чр╕Фр╕кр╕нр╕Ъ integration р╕Бр╕▒р╕Ъ attendance service
тФЬтФАтФА line-timezone.test.ts         # р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╣Ар╕зр╕ер╕▓р╣Гр╕Щ LINE messages
тФФтФАтФА README.md                     # р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Щр╕╡р╣Й
```

## ЁЯЪА р╕Бр╕▓р╕гр╕гр╕▒р╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ | Running Tests

### р╕гр╕▒р╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

```bash
bun test
```

### р╕гр╕▒р╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕Йр╕Юр╕▓р╕░ timezone

```bash
bun test timezone
```

### р╕гр╕▒р╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ LINE timezone display

```bash
bun run test:line
```

### р╕гр╕▒р╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╣Бр╕Ър╕Ъ watch mode

```bash
bun test --watch
```

### р╕гр╕▒р╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Юр╕гр╣Йр╕нр╕б coverage

```bash
bun test --coverage
```

## ЁЯУЭ р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ | Test Details

### ЁЯХР timezone.test.ts

р╕Чр╕Фр╕кр╕нр╕Ър╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕лр╕ер╕▒р╕Бр╕Вр╕нр╕Зр╕гр╕░р╕Ър╕Ъ timezone:

#### тЬЕ UTC Time Generation

- р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╣Ар╕зр╕ер╕▓ UTC р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е

#### тЬЕ UTC to Bangkok Conversion

- р╕Бр╕▓р╕гр╣Бр╕Ыр╕ер╕Зр╣Ар╕зр╕ер╕▓р╕Ир╕▓р╕Б UTC р╣Ар╕Ыр╣Зр╕Щр╣Ар╕зр╕ер╕▓р╣Др╕Чр╕в (+7 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З)
- р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕г edge cases (р╣Ар╕Чр╕╡р╣Ир╕вр╕Зр╕Др╕╖р╕Щ, р╣Ар╕Кр╣Йр╕▓р╕Хр╕гр╕╣р╣И)

#### тЬЕ Time Formatting

- р╕Бр╕▓р╕г format р╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╣Ар╕зр╕ер╕▓р╣Бр╕Ър╕Ър╣Др╕Чр╕в (р╕Юр╕╕р╕Чр╕Шр╕ир╕▒р╕Бр╕гр╕▓р╕К)
- р╕Бр╕▓р╕г format р╣Ар╕Йр╕Юр╕▓р╕░р╣Ар╕зр╕ер╕▓ (HH:MM)
- р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕г leading zeros

#### тЬЕ Working Hours Validation

- р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕зр╕ер╕▓р╕Чр╕│р╕Зр╕▓р╕Щ (08:00-11:00)
- р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Вр╕нр╕Ър╣Ар╕Вр╕Хр╣Ар╕зр╕ер╕▓

#### тЬЕ Working Day Validation

- р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╕▒р╕Щр╕Чр╕│р╕Зр╕▓р╕Щ (р╕Ир╕▒р╕Щр╕Чр╕гр╣М-р╕ир╕╕р╕Бр╕гр╣М)
- р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф

#### тЬЕ Integration Tests

- р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ flow р╕Бр╕▓р╕гр╕ер╕Зр╕Кр╕╖р╣Ир╕нр╣Ар╕Вр╣Йр╕▓р╕Зр╕▓р╕Щр╣Бр╕Ър╕Ър╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М
- р╕Бр╕▓р╕гр╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щ double timezone conversion

#### тЬЕ Performance Tests

- р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Ыр╕гр╕░р╕кр╕┤р╕Чр╕Шр╕┤р╕ар╕▓р╕Юр╕Бр╕▓р╕гр╣Бр╕Ыр╕ер╕Зр╣Ар╕зр╕ер╕▓

### ЁЯФЧ attendance-integration.test.ts

р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕гр╣Ир╕зр╕бр╕Бр╕▒р╕Ъ attendance service р╕Ир╕гр╕┤р╕З:

#### тЬЕ Service Import Tests

- р╕Бр╕▓р╕г import attendance service
- р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Чр╕╡р╣Ир╕Ир╕│р╣Ар╕Ыр╣Зр╕Щ

#### тЬЕ Real Database Integration

- р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▒р╕Ъ timestamp р╕Ир╕гр╕┤р╕Зр╕Ир╕▓р╕Бр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е
- р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕е

#### тЬЕ Working Hours Integration

- р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕зр╕ер╕▓р╕Чр╕│р╕Зр╕▓р╕Щр╣Гр╕Щр╕кр╕ар╕▓р╕Юр╣Бр╕зр╕Фр╕ер╣Йр╕нр╕бр╕Ир╕гр╕┤р╕З

#### тЬЕ Edge Cases Handling

- р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Бр╕гр╕Ур╕╡р╕Юр╕┤р╣Ар╕ир╕йр╕Хр╣Ир╕▓р╕Зр╣Ж р╣Гр╕Щр╕кр╕ар╕▓р╕Юр╣Бр╕зр╕Фр╕ер╣Йр╕нр╕бр╕Ир╕гр╕┤р╕З

#### тЬЕ Real-world Scenarios

- р╕Бр╕▓р╕гр╕Ир╕│р╕ер╕нр╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Ир╕гр╕┤р╕Зр╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ concurrent operations

### ЁЯУ▒ line-timezone.test.ts

р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╣Ар╕зр╕ер╕▓р╣Гр╕Щ LINE bubble messages р╕лр╕ер╕▒р╕Зр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓ double timezone conversion:

#### тЬЕ Check-in Success Message Testing

- р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╣Ар╕зр╕ер╕▓р╣Ар╕Вр╣Йр╕▓р╕Зр╕▓р╕Щр╣Гр╕Щр╕Кр╣Ир╕зр╕Зр╣Ар╕Кр╣Йр╕▓ (08:54)
- р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╣Ар╕зр╕ер╕▓р╣Ар╕Вр╣Йр╕▓р╕Зр╕▓р╕Щр╣Гр╕Щр╕Кр╣Ир╕зр╕Зр╕кр╕▓р╕в (10:30)

#### тЬЕ Real-world Scenario Testing

- р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╣Ар╕зр╕ер╕▓р╕Ьр╕┤р╕Фр╕Ир╕▓р╕Бр╕ар╕▓р╕Юр╕лр╕Щр╣Йр╕▓р╕Ир╕н
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Бр╕кр╕Фр╕З 09:21 р╣Бр╕Чр╕Щ 16:21 (р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З)
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Бр╕кр╕Фр╕З 18:21 р╣Бр╕Чр╕Щ 01:21 (р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З)

#### тЬЕ Timezone-Safe Formatting

- р╕Бр╕▓р╕гр╣Гр╕Кр╣Й `formatThaiTimeOnly()` р╣Бр╕Чр╕Щ `toLocaleString()`
- р╕Бр╕▓р╕гр╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щ double timezone conversion
- р╕Бр╕▓р╕гр╣Гр╕Кр╣Й UTC methods р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕г formatting

## ЁЯОп р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╣Бр╕Бр╣Йр╣Др╕Вр╣Бр╕ер╣Йр╕з | Fixed Issues

### тЭМ р╕Ыр╕▒р╕Нр╕лр╕▓р╣Ар╕Фр╕┤р╕б: Double Timezone Conversion

```
UTC: 01:54:46.208Z тЖТ р╣Бр╕кр╕Фр╕Зр╕Ьр╕е: 15:54 (р╕Ьр╕┤р╕Ф!)
```

### тЬЕ р╕лр╕ер╕▒р╕Зр╣Бр╕Бр╣Йр╣Др╕В: Single Timezone Conversion

```
UTC: 01:54:46.208Z тЖТ Bangkok: 08:54:46 (р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З!)
```

## ЁЯФз р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Чр╕╡р╣Ир╕кр╕│р╕Др╕▒р╕Н | Key Fixes

1. **р╣Гр╕Кр╣Й UTC methods р╣Гр╕Щ formatting functions**

   - `date.getHours()` тЖТ `date.getUTCHours()`
   - `date.getMinutes()` тЖТ `date.getUTCMinutes()`

2. **р╕Бр╕▓р╕гр╣Бр╕Ыр╕ер╕Зр╣Ар╕зр╕ер╕▓р╕Др╕гр╕▒р╣Йр╕Зр╣Ар╕Фр╕╡р╕вр╕з**

   - р╣Бр╕Ыр╕ер╕З UTC тЖТ Bangkok р╣Ар╕Юр╕╡р╕вр╕Зр╕Др╕гр╕▒р╣Йр╕Зр╣Ар╕Фр╕╡р╕вр╕з
   - р╕лр╕ер╕╡р╕Бр╣Ар╕ер╕╡р╣Ир╕вр╕Зр╕Бр╕▓р╕гр╣Бр╕Ыр╕ер╕Зр╕Лр╣Йр╕нр╕Щр╕Бр╕▒р╕Щ

3. **р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Чр╕╡р╣Ир╕кр╕бр╣Ир╕│р╣Ар╕кр╕бр╕н**
   - р╣Гр╕Кр╣Й UTC methods р╣Гр╕Щр╕Чр╕╕р╕Бр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ
   - р╕гр╕▒р╕Ър╕Ыр╕гр╕░р╕Бр╕▒р╕Щр╕Др╕зр╕▓р╕бр╕кр╕бр╣Ир╕│р╣Ар╕кр╕бр╕нр╣Гр╕Щр╕Бр╕▓р╕гр╕Др╕│р╕Щр╕зр╕У

## ЁЯУК р╕Ьр╕ер╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ | Test Results

```
тЬЕ 22 tests р╕Ьр╣Ир╕▓р╕Щр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
тЬЕ 83 expect() calls
тЬЕ р╕гр╕▒р╕Щр╣Ар╕кр╕гр╣Зр╕Ир╣Гр╕Щ 62ms
тЬЕ Coverage: р╕Др╕гр╕нр╕Ър╕Др╕ер╕╕р╕бр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕лр╕ер╕▒р╕Бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
```

## ЁЯЪи р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕р╕кр╕│р╕Др╕▒р╕Н | Important Notes

- р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Щр╕╡р╣Йр╣Гр╕Кр╣Й mock functions р╣Ар╕бр╕╖р╣Ир╕нр╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Ц import service р╕Ир╕гр╕┤р╕Зр╣Др╕Фр╣Й
- р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Др╕гр╕нр╕Ър╕Др╕ер╕╕р╕б edge cases р╣Бр╕ер╕░ real-world scenarios
- р╕Ыр╕гр╕░р╕кр╕┤р╕Чр╕Шр╕┤р╕ар╕▓р╕Юр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╣Бр╕ер╕░р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Бр╕ер╣Йр╕з

## ЁЯФД р╕Бр╕▓р╕гр╕Ър╕│р╕гр╕╕р╕Зр╕гр╕▒р╕Бр╕йр╕▓ | Maintenance

р╣Ар╕бр╕╖р╣Ир╕нр╕бр╕╡р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ timezone р╕лр╕гр╕╖р╕н attendance service:

1. р╕гр╕▒р╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕Юр╕╖р╣Ир╕нр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╕зр╕▓р╕бр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
2. р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Хр╕▓р╕бр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ coverage р╣Бр╕ер╕░р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╣Гр╕лр╕бр╣Ир╕Хр╕▓р╕бр╕Др╕зр╕▓р╕бр╕Ир╕│р╣Ар╕Ыр╣Зр╕Щ

---

**р╕кр╕гр╣Йр╕▓р╕Зр╣Ар╕бр╕╖р╣Ир╕н**: р╕бр╕┤р╕Цр╕╕р╕Щр╕▓р╕вр╕Щ 2568  
**р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕ер╣Ир╕▓р╕кр╕╕р╕Ф**: р╕бр╕┤р╕Цр╕╕р╕Щр╕▓р╕вр╕Щ 2568  
**р╕кр╕Цр╕▓р╕Щр╕░**: тЬЕ р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╣Бр╕ер╕░р╕Чр╕Фр╕кр╕нр╕Ър╣Бр╕ер╣Йр╕з
